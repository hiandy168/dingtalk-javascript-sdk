"use strict";function parse(e,n,i){var r=Object.create(null);if("string"!=typeof e||0===e.length)return r;n=n||"&",i=i||"=";for(var t=e.split(n),o=0,l=t.length;o<l;o++){var a=t[o].split(i),s=a[0].trim(),u="";a.length>=3?function(){a.splice(0,1);var e=a.length-1;a.forEach(function(n,r){n=n.trim(),u+=r===e?n:n+i})}():u=a[1].trim();var f=r[s];if(f)if(Array.isArray(f))f.push(decodeURIComponent(u));else{var d=f;r[s]=new Array,r[s].push(d),r[s].push(decodeURIComponent(u))}else r[s]=decodeURIComponent(u)}return r}function stringify(e,n,i){if(n=n||"&",i=i||"=",null!==e&&"object"===(void 0===e?"undefined":_typeof(e))){for(var r=Object.keys(e),t=r.length,o=t-1,l="",a=0;a<t;a++){var s=r[a],u=e[s],f=s+i;if(Array.isArray(u)){for(var d=u.length,g=d-1,p=0;p<d;++p)l+=f+decodeURIComponent(u[p]),p<g&&(l+=n);d&&a<o&&(l+=n)}else l+=f+decodeURIComponent(u),a<o&&(l+=n)}return l}return""}function format(e,n){return e+"?"+querystring.stringify(n)}function parse$1(e,n){var i={hash:null,search:null};if(!e)return{};var r=e.indexOf("?");if(-1===r)return{};var t=e.indexOf("#");t>-1?(i.hash=e.slice(t),i.search=e.slice(r,t)):i.search=e.slice(r);var o=i.search.slice(1),l=querystring.parse(o);return"string"==typeof n&&n.length>0?l[n]:l}function getEnv(){var e={};if("undefined"!=typeof weex){var n=weex.config,i=n.env;if(e.platform=i.platform,e.bundleFrameworkType="Vue","Web"!==e.platform)e.dingtalk={bundleUrl:n.bundleUrl,originalUrl:n.originalUrl},e.appVersion=i.appVersion,e.appName=i.appName;else{var r=location.href,t=url.parse(r,"dd_wx_tpl"),o=url.parse(r,"_wx_tpl");e.dingtalk={bundleUrl:t||o||"",originalUrl:r}}}else{if("function"==typeof callNative)e.platform=navigator.platform,e.appName=navigator.appName,e.appVersion=navigator.appVersion,e.dingtalk={bundleUrl:__weex_options__.bundleUrl,originalUrl:__weex_options__.originalUrl};else{e.platform="Web";var l=location.href,a=url.parse(l,"dd_wx_tpl"),s=url.parse(l,"_wx_tpl");e.dingtalk={bundleUrl:a||s||"",originalUrl:l}}e.bundleFrameworkType="Rax"}return e}function dingtalkContainer(){return isWeex$1?"DingTalk"===env$2.appName||"com.alibaba.android.rimet"===env$2.appName:UA&&UA.indexOf("dingtalk")>-1}function webAndroid(){return isWeb$1?UA&&UA.indexOf("android")>-1:null}function webiOS(){return isWeb$1?UA&&/iphone|ipad|ipod|ios/.test(UA):null}function fetchVersion(){if(isWeb$1){var e=UA.match(/aliapp\(\w+\/([a-zA-Z0-9.-]+)\)/);return null===e&&(e=UA.match(/dingtalk\/([a-zA-Z0-9.-]+)/)),e&&e[1]}return env$2.appVersion}function toPlatform(){var e=void 0;return isDingtalk$1?isWebAndroid?e="web.android":isWebiOS?e="web.ios":isWeexAndroid?e="weex.android":isWeexiOS&&(e="weex.ios"):e="not.dingtalk",e}function compareVersion(e,n,i){if("string"!=typeof e||"string"!=typeof n)return!1;var r=e.split("."),t=n.split("."),o=void 0,l=void 0;do{o=r.shift(),l=t.shift()}while(o===l&&t.length>0);return i?(0|l)>=(0|o):(0|l)>(0|o)}function requireModule$1(e){if(isWeex$1$1){if("Vue"===bundleFrameworkType$1)return weex.requireModule(e);var n="@weex-module/"+e;return __weex_require__(n)}if("Vue"===bundleFrameworkType$1)return weex.requireModule(e)}function Document(){return isWeex$2&&"Vue"===bundleFrameworkType$2?weex.document:document}function setTimeout(e,n){return isWeex$3?(timer.setTimeout(e,n),doc.taskCenter.callbackManager.lastCallbackId.toString()):window.setTimeout(e,n)}function clearTimeout(e){isWeex$3?timer.clearTimeout(e):window.clearTimeout(e)}function setInterval(e,n){return isWeex$3?(timer.setInterval(e,n),doc.taskCenter.callbackManager.lastCallbackId.toString()):window.setInterval(e,n)}function clearInterva(e){isWeex$3?timer.clearInterva(e):window.clearInterva(e)}function fillZore(e){var n="00"+e;return n.substring(n.length-2)}function checkConfigVars(e){var n=Object.keys(e);checks.map(function(e){0===n.filter(function(n){return e===n}).length&&logger$1.warn("configure : "+e+"is empty")})}function permissionJsApis(e,n,i){if(!n)return void ship.ready(function(){e(null)});ship.ready(function(){var r=ship.apis.runtime.permission,t=n||{},o=i||null;t.onSuccess=function(n){e(null,n)},t.onFail=function(n){"function"==typeof o?o(n):e(n,null)},r.requestJsApis(t)})}function performQueue(){dingtalkQueue&&dingtalkQueue.length>0&&(dingtalkQueue.forEach(function(e){e()}),dingtalkQueue.length=0)}function initDingtalkSDK(){var e={apis:{},config:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}(function(e){if(!e)return void logger$1.warn("config is undefined,you must configure Dingtalk parameters");"production"!==process.env.NODE_ENV&&checkConfigVars(e),dingtalkJsApisConfig=e}),init:function(){dingtalkQueue=[],ship.init(),ship.ready(function(){isReady=ship.isReady,e.apis=ship.apis?ship.apis:{},performQueue()})},ready:function(e){if(!e||"function"!=typeof e)return void logger$1.warn("callback is undefined");if(isReady)permissionJsApis(e,dingtalkJsApisConfig,dingtalkErrorCb);else{dingtalkQueue&&dingtalkQueue.push(function(e){return function(){permissionJsApis(e,dingtalkJsApisConfig,dingtalkErrorCb)}}(e))}},error:function(e){"function"==typeof e&&(dingtalkErrorCb=e)},EventEmitter:ship.EventEmitter};return e}function installNativeEvent(e){e.on=function(e,n,i){document.addEventListener(e,n,i)},e.off=function(e,n,i){document.removeEventListener(e,n,i)}}function initWebDingtalkSDK(){var e=initDingtalkSDK();return installNativeEvent(e),e}function installNativeEvent$2(e){e.on=ship.on,e.off=ship.off}function initWeexDingtalkSDK(){var e=initDingtalkSDK();return installNativeEvent$2(e),e}var _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof="function"==typeof Symbol&&"symbol"==_typeof$1(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof$1(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof$1(e)},toConsumableArray$$1=function(e){if(Array.isArray(e)){for(var n=0,i=Array(e.length);n<e.length;n++)i[n]=e[n];return i}return Array.from(e)},querystring={stringify:stringify,parse:parse},url={format:format,parse:parse$1},env$2=getEnv(),isWeb$1="Web"===env$2.platform,isWeexiOS="iOS"===env$2.platform,isWeexAndroid="android"===env$2.platform,isWeex$1=isWeexiOS||isWeexAndroid,dingtalk=env$2.dingtalk,bundleFrameworkType=env$2.bundleFrameworkType,bundleUrl=dingtalk.bundleUrl,originalUrl=dingtalk.originalUrl,UA=void 0;isWeb$1&&(UA=window.navigator.userAgent.toLowerCase());var isDingtalk$1=dingtalkContainer(),isWebiOS=webiOS(),isWebAndroid=webAndroid(),version=fetchVersion(),env$1$1={isDingtalk:isDingtalk$1,isWeb:isWeb$1,isWebiOS:isWebiOS,isWebAndroid:isWebAndroid,isWeex:isWeex$1,isWeexiOS:isWeexiOS,isWeexAndroid:isWeexAndroid,bundleFrameworkType:bundleFrameworkType,bundleUrl:bundleUrl,originalUrl:originalUrl,version:version,platform:toPlatform()},bundleFrameworkType$1=env$1$1.bundleFrameworkType,isWeex$1$1=env$1$1.isWeex,bundleFrameworkType$2=env$1$1.bundleFrameworkType,isWeex$2=env$1$1.isWeex,doc=Document(),timer=requireModule$1("timer"),isWeex$3=env$1$1.isWeex,timer$1={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterva:clearInterva},LOG="LOG",INFO="INFO",WARNING="WARNING",ERROR="ERROR",LogType$1={LOG:LOG,INFO:INFO,WARNING:WARNING,ERROR:ERROR},logChannel=function(e){var n,i,r,t,o=fillZore(e.time.getHours())+":"+fillZore(e.time.getMinutes())+":"+fillZore(e.time.getSeconds());switch(e.type){case LogType$1.LOG:(n=console).log.apply(n,["time:"+o+" | log: "].concat(toConsumableArray$$1(e.logArr)));break;case LogType$1.INFO:(i=console).info.apply(i,["time:"+o+" | info: "].concat(toConsumableArray$$1(e.logArr)));break;case LogType$1.ERROR:(r=console).error.apply(r,["time:"+o+" | error: "].concat(toConsumableArray$$1(e.logArr)));break;case LogType$1.WARNING:(t=console).warn.apply(t,["time:"+o+" | warning: "].concat(toConsumableArray$$1(e.logArr)))}},setLog$1=function(e){logChannel=e},log$1=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LogType$1.LOG;logChannel({type:n,logArr:e,time:new Date})};log$1(["current environment: "+env$1$1.platform]);var logger={log:log$1,setLog:setLog$1,LogType:LogType$1},log=logger.log,setLog=logger.setLog,LogType=logger.LogType,index={querystring:querystring,url:url,env:env$1$1,compareVersion:compareVersion,requireModule:requireModule$1,document:doc,timer:timer$1,LogType:LogType,setLog:setLog,log:log},journeyMin=index,env$1=journeyMin.env,requireModule=journeyMin.requireModule,polyfills={env:env$1,requireModule:requireModule},cat={},ship={},logger$1={warn:function(e,n){if(console.warn("[DINGTALK JS SDK Warning]:",e),n)throw n;var i=new Error("WARNING STACK TRACE");console.warn(i.stack)},info:function(e){console.info("[DINGTALK JS SDK INFO]:",e)},error:function(e){console.error("[DINGTALK JS SDK ERROR]:",e)}},checks=["agentId","corpId","timeStamp","nonceStr","signature","jsApiList"],dingtalkJsApisConfig=null,dingtalkQueue=null,dingtalkErrorCb=null,isReady=!1,initCtrl=!0,env=polyfills.env,isDingtalk=env.isDingtalk,isWeex=env.isWeex,isWeb=env.isWeb,dingtalkSDK={};isDingtalk||logger$1.warn("can only open the page be Dingtalk Container"),initCtrl&&(initCtrl=!1,isWeex?dingtalkSDK=initWeexDingtalkSDK():isWeb&&(dingtalkSDK=initWebDingtalkSDK()),dingtalkSDK.init());var dingtalkSDK$1=dingtalkSDK;module.exports=dingtalkSDK$1;
//# sourceMappingURL=dingtalk-javascript-sdk-min.js.map
