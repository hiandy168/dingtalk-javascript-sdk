{"version":3,"file":"dingtalk-sdk-min.js","sources":["../package/dingtalk-sdk-polyfills/core/env.js","../package/dingtalk-sdk-polyfills/core/requireModule.js","../package/dingtalk-sdk-exec/android_exec.js","../package/dingtalk-sdk-exec/ios_exec.js","../package/dingtalk-sdk-exec/web_exec.js","../package/dingtalk-sdk-exec/index.js","../package/dingtalk-sdk-ship/global-api/EventEmitter.js","../package/dingtalk-sdk-ship/core/parseJsApis.js","../package/dingtalk-sdk-ship/index.js","../src/shared/checkConfigVars.js","../src/core/permissionJsApis.js","../src/core/bridge.js","../src/platforms/web/nativeEvent.js","../src/platforms/web/index.js","../src/platforms/weex/nativeEvent.js","../src/platforms/weex/index.js","../package/dingtalk-sdk-polyfills/index.js","../src/shared/logger.js","../src/index.js"],"sourcesContent":["/* @flow */\n\nlet weexEnv = {};\n\nif (typeof weex !== 'undefined'){\n  const config = weex.config;\n  const env = config.env;\n  weexEnv.platform = env.platform;\n  weexEnv.bundleFrameworkType = 'Vue';\n  if (weexEnv.platform !== 'Web'){\n    weexEnv.dingtalk = {\n      bundleUrl: config.bundleUrl,\n      originalUrl: config.originalUrl\n    };\n    weexEnv.appVersion = env.appVersion;\n    weexEnv.appName = env.appName;\n  }\n} else {\n  if (typeof callNative === 'function'){\n    weexEnv.platform = navigator.platform;\n    weexEnv.appName = navigator.appName;\n  } else {\n    weexEnv.platform = 'Web';\n  }\n  weexEnv.bundleFrameworkType = 'Rax';\n}\n\nconst isWeb = weexEnv.platform === 'Web';\nconst isWeexiOS = env.platform === 'iOS';\nconst isWeexAndroid = env.platform === 'android';\nconst isWeex = isWeexiOS || isWeexAndroid;\n\nlet UA;\nif(isWeb){\n  UA = window.navigator.userAgent.toLowerCase();\n}\n\nfunction dingtalkContainer(){\n  if (isWeex){\n    if (weexEnv.appName === 'DingTalk' || weexEnv.appName === 'com.alibaba.android.rimet'){\n      return true;\n    }\n    return false;\n  } else {\n    return UA && UA.indexOf('dingtalk') > -1;\n  }\n}\n\nweexEnv.isDingtalk = dingtalkContainer();\n\nexport default weexEnv;\n","/* @flow */\n\nfunction initRequireModule () : Function {\n  let requireModule = function(name){\n    let moduleName = '@weex-module/' + name;\n    return __weex_require__(moduleName);\n  }\n  if (typeof weex !== 'undefined'){\n    requireModule = weex.requireModule;\n  }\n  return requireModule;\n}\n\nexport default initRequireModule;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\nconst STATUS_NO_RESULT: string = '0';\nconst STATUS_OK: string = '1';\nconst STATUS_ERROR: string = '2';\n\nexport default function android_exec(exec:Function,config:Object){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\" && response.__status__) {\n        const status = response.__status__;\n        const message = response.__message__;\n        if (STATUS_OK === status){\n            win && win.call(context, message);\n        } else if (STATUS_ERROR === status){\n            fail && fail.call(context, message);\n        }\n      } else {\n        fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nexport default function ios_exec(exec:Function,config:Object){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\") {\n        if ('0' === response.errorCode) {\n          win && win.call(context, response.result);\n        } else {\n          fail && fail.call(context, response.result);\n        }\n      }\n      else {\n          fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","/* @flow */\n\nimport weexEnvVar from 'dingtalk-sdk-polyfills';\n\nlet platform = weexEnvVar.env.platform;\nlet isAndroid = null;\nlet isIOS = null;\nlet bridgeReady = false;\n\nif (platform === 'Web'){\n  const UA = window.navigator.userAgent.toLowerCase();\n  isAndroid = UA && UA.indexOf('android') > -1;\n  isIOS = UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\nfunction ios_exec(config:Object){\n  const webViewJavascriptBridge = window._WebViewJavascriptBridge;\n  if (!webViewJavascriptBridge){\n    throw 'runtime and bridge are not ready';\n  }\n  const { body, onSuccess, onFail, context } = config;\n  webViewJavascriptBridge.callHandler('exec',body,function(response){\n    if (typeof response !== 'undefined'){\n      if ('0' === response.errorCode){\n        typeof onSuccess === 'function' && onSuccess.call(context,response.result);\n      } else {\n        typeof onFail === 'function' && onFail.call(context,response.result);\n      }\n    }\n    typeof onFail === 'function' && onFail.call('-1','');\n  });\n}\n\nfunction android_exec(config:Object){\n  let { body, onSuccess, onFail, context } = config;\n  let { plugin, action, args } = body;\n  const webViewJavascriptBridge = window.WebViewJavascriptBridgeAndroid;\n  webViewJavascriptBridge(plugin, action, args, onSuccess, onFail, context);\n}\n\nfunction runAndroid(){\n  window.WebViewJavascriptBridgeAndroid = window.nuva.require();\n}\n\nexport default function web_exec(config:Object){\n  if (isIOS){\n    if (window._WebViewJavascriptBridge){\n      ios_exec(config);\n    } else {\n      document.addEventListener('_WebViewJavascriptBridgeReady',function(){\n        ios_exec(config);\n      },false);\n    }\n  } else if (isAndroid) {\n    const win = window;\n    if (win.nuva && (win.nuva.isReady === undefined || win.nuva.isReady)){\n      if (!bridgeReady){\n        runAndroid();\n      }\n      android_exec(config);\n    } else {\n      document.addEventListener('runtimeready',function(){\n        if (!bridgeReady){\n          runAndroid();\n        }\n        android_exec(config);\n      },false);\n    }\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport android_exec from './android_exec.js';\nimport ios_exec from './ios_exec.js';\nimport weexInstanceVar from 'dingtalk-sdk-polyfills';\nimport web_exec from './web_exec.js';\n\nlet platform  = weexInstanceVar.env.platform;\nlet nativeExec: ?Function = null;\nif (platform !== 'Web'){\n  nativeExec = weexInstanceVar.requireModule('nuvajs-exec').exec;\n}\n\nfunction exec_affirm(plugin: string, action: string, args: ?Object,onSuccess: ?Function, onFail: ?Function, context: ?Object){\n  const body: {\n    plugin: string,\n    action: string,\n    args: Object\n  } = {\n    plugin: plugin,\n    action: action,\n    args: args ? args : {}\n  }\n  const config: {\n    body: Object,\n    onSuccess: ?Function,\n    onFail: ?Function,\n    context: ?Object\n  } = {\n    body: body,\n    onSuccess: onSuccess ? onSuccess : null,\n    onFail: onFail ? onFail : null,\n    context: context ? context : null\n  }\n  exec(config);\n}\n\nfunction exec(config:Object) {\n  let native_exec: Function = nativeExec ? nativeExec : function(){};\n  if (platform === 'iOS'){\n    ios_exec(native_exec,config);\n  } else if(platform === 'android') {\n    android_exec(native_exec,config);\n  } else {\n    web_exec(config);\n  }\n}\n\nexport default exec;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nlet cat: Object = {};\nlet EventEmitter:{\n  on: Function,\n  off: Function,\n  once: Function,\n  emit: Function\n} = {\n  on: function(event: string,fun: Function){\n    let cbs = cat[event];\n    cbs ? cbs.push(fun) : cat[event] = [];\n    if (!cbs) {\n      cat[event].push(fun);\n    }\n  },\n  off: function(event: string,fun: Function){\n    let cbs = cat[event];\n    if (!cbs) {\n      return false;\n    }\n    if (!event && !fun) {\n      cat = {};\n      return true;\n    }\n    if (event && !fun) {\n      cat[event] = null;\n      return true;\n    }\n    let cb;\n    let i = cbs.length;\n    while(i--){\n      cb = cbs[i];\n      if (cb === fun || cb.fun === fun) {\n        cbs.splice(i,1);\n        break;\n      }\n    }\n    return true;\n  },\n  once: function(event: string,fun: Function){\n    function _on(){\n      EventEmitter.off(event,_on);\n      fun.apply(this,arguments);\n    }\n    _on.fun = fun;\n    EventEmitter.on(event,_on);\n  },\n  emit: function(event: string){\n    let isString = typeof event === 'string';\n    if (!isString){\n      return;\n    }\n    let cbs = cat[event];\n    let args = toArray(arguments,1);\n    if (cbs) {\n      let i = 0;\n      let j = cbs.length;\n      for(;i<j;i++){\n        let cb = cbs[i];\n        cb.apply(this,args);\n      }\n    }\n  }\n};\n\nfunction toArray(list: Array<any>, index: ?number) {\n  let _index = index || 0;\n  let i = list.length - _index;\n  let _array = new Array(i);\n  while(i--){\n    _array[i] = list[i + _index]\n  }\n  return _array\n}\n\nexport default EventEmitter;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport exec from 'dingtalk-sdk-exec';\n\nfunction createApi(_name:string,_action:string){\n  return function(params){\n    if (!params) {\n      params = {};\n    }\n    let onSuccess = params.onSuccess;\n    let onFail = params.onFail;\n    delete params.onSuccess;\n    delete params.onFail;\n    delete params.onCancel;\n    const config = {\n      body: {\n        plugin: _name,\n        action: _action,\n        args: params\n      },\n      onSuccess: onSuccess,\n      onFail: onFail\n    };\n    exec(config);\n  }\n}\n\nfunction createFuns(name:string,funs:Array<any>) : Object{\n  let s = Object.create(null);\n  funs.forEach(function(action){\n    s[action] = createApi(name, action);\n  });\n  return s;\n}\n\nexport default function parseJsApis(jsApis: Object) : Object{\n  let apis: Object = Object.create(null);\n  for (let name: string in jsApis) {\n    let node: Array<string> = name.split('.');\n    let funs: Array<string> = jsApis[name];\n    let staging = null;\n    let i: number = 0;\n    let j: number = node.length;\n    while (true) {\n      if (!staging) {\n        if (1 === j) {\n          let h = false;\n          let p = apis[node[i]];\n          let s = createFuns(name, funs);\n          for (let x in p){\n            if (p.hasOwnProperty(x)){\n              h = true;\n              break;\n            }\n          }\n          if (h){\n            for (let k in s){\n              p[k] = s[k];\n            }\n          } else {\n            apis[node[i]] = createFuns(name, funs);\n          }\n          break;\n        }\n        if (apis[node[i]]){\n          staging = apis[node[i]];\n          i++;\n          continue;\n        }\n        apis[node[i]] = {};\n        staging = apis[node[i]];\n        i++;\n        continue;\n      } else {\n        if ((j - 1) === i) {\n          staging[node[i]] = createFuns(name, funs);\n          break;\n        }\n        if (staging[node[i]]) {\n          i++;\n          continue;\n        }\n        staging[node[i]] = {};\n        staging = staging[node[i]];\n      }\n      i++;\n      if (i > j) {\n        break;\n      }\n    }\n  }\n\treturn apis;\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport exec from 'dingtalk-sdk-exec';\nimport EventEmitter from './global-api/EventEmitter.js';\nimport parseJsApis from './core/parseJsApis.js';\nimport weexInstanceVar from 'dingtalk-sdk-polyfills';\n\nlet platform = weexInstanceVar.env.platform;\nlet globalEvent: Object = {};\nif (platform !== 'Web'){\n  globalEvent = weexInstanceVar.requireModule('globalEvent');\n}\n\nfunction rtFunc(method: string): Function {\n  return function(cb: Function) {\n    const config:{\n      body: Object,\n      onSuccess: Function,\n      onFail: Function,\n      context: ?Object\n    } = {\n      body: {\n        plugin: 'runtime',\n        action: method,\n        args: {}\n      },\n      onSuccess: function(response){\n        if (typeof cb === 'function'){\n          cb(response);\n        }\n      },\n      onFail: function(){\n\n      },\n      context: null\n    };\n    exec(config);\n  };\n}\n\nfunction initDingtalkRequire(cb: Function){\n    rtFunc('getModules')(cb);\n}\n\nlet ship: {\n  apis: ?Object,\n  isReady: boolean,\n  runtime: Object,\n  init: Function,\n  ready: Function,\n  on: Function,\n  off: Function,\n  EventEmitter: Object\n} = {\n  getModules: null,\n  isReady: false,\n  runtime: {\n    info: rtFunc('info'),\n    _interceptBackButton: rtFunc('interceptBackButton'),\n    _interceptNavTitle: rtFunc('interceptNavTitle'),\n    _recoverNavTitle: rtFunc('recoverNavTitle'),\n    _getModules: rtFunc('getModules')\n  },\n  init: function(){\n    initDingtalkRequire(function(response){\n      if(response){\n        ship.isReady = true;\n        ship.apis = parseJsApis(response);\n        EventEmitter.emit('__ship_ready__');\n      }\n    });\n  },\n  ready: function(cb: Function){\n    if (ship.isReady){\n      if (typeof cb === 'function'){\n        cb();\n      }\n    } else {\n      if (typeof cb === 'function'){\n        EventEmitter.once('__ship_ready__', function(){\n          cb();\n        });\n      }\n    }\n  },\n  on: function(type: string, handler: Function){\n    globalEvent.addEventListener(type,function(e){\n      const event:{\n        preventDefault: Function,\n        detail: Object\n      } = {\n        preventDefault: function () {\n          console.warn('当前环境不支持 preventDefault')\n        },\n        detail: e\n      };\n      handler.call(this,event);\n    });\n  },\n  off: globalEvent.removeEventListener,\n  EventEmitter: EventEmitter\n};\n\nexport default ship;\n","/* @flow */\n\nimport logger from './logger.js';\n\nconst checks = [\n  'agentId',\n  'corpId',\n  'timeStamp',\n  'nonceStr',\n  'signature',\n  'jsApiList'\n];\n\nexport default function checkConfigVars(config:Object){\n  /*\n    corpId,\n    appId,\n    timeStamp,\n    nonceStr,\n    signature,\n    jsApiList,\n    type,\n    agentId\n   */\n  let checkInfo = [];\n  let infoKey = Object.keys(config);\n  checks.map(function(v){\n     const checkResult = infoKey.filter(function (k) { return v === k;});\n     if (checkResult.length === 0){\n         logger.warn('configure : ' + v + 'is empty');\n     }\n  });\n}\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport ship from 'dingtalk-sdk-ship';\n\nexport default function permissionJsApis(cb: Function,jsApisConfig:?Object, errorCb: ?Function){\n  if (!jsApisConfig){\n    ship.ready(function(){\n      cb(null);\n    });\n    return;\n  }\n  ship.ready(function(){\n    const permission = ship.apis.runtime.permission;\n    let apisConf = jsApisConfig ? jsApisConfig : {};\n    let errCb = errorCb ? errorCb : null;\n    apisConf.onSuccess = function(response){\n      cb(null, response);\n    };\n    apisConf.onFail = function(error){\n      if (typeof errCb === 'function'){\n        errCb(error);\n      } else {\n        cb(error, null);\n      }\n    };\n    permission.requestJsApis(apisConf);\n  });\n}\n","/* @flow */\n\nimport ship from 'dingtalk-sdk-ship';\nimport { extend } from 'shared/util.js';\nimport logger from 'shared/logger.js';\nimport checkConfigVars from 'shared/checkConfigVars.js';\nimport permissionJsApis from './permissionJsApis.js';\n\nlet dingtalkJsApisConfig: ?Object = null;\nlet dingtalkQueue: ?Array<Function> = null;\nlet dingtalkErrorCb: ?Function = null;\nlet isReady: boolean = false;\n\nfunction performQueue (){\n  if (dingtalkQueue && dingtalkQueue.length > 0){\n    dingtalkQueue.forEach(function(task){\n      task();\n    });\n    dingtalkQueue.length = 0;\n  }\n}\n\nfunction initDingtalkSDK() : Object{\n  let dingtalk: {\n    apis: Object,\n    config: Function,\n    init: Function,\n    ready: Function,\n    error: Function,\n    EventEmitter: Object\n  } = {\n    apis: {},\n    config: function(config: Object){\n      if (!config){\n        logger.warn('config is undefined,you must configure Dingtalk parameters');\n        return;\n      }\n      if (process.env.NODE_ENV !== 'production'){\n        checkConfigVars(config);\n      }\n      dingtalkJsApisConfig = config;\n    },\n    init: function(){\n      // 初始化一次\n      dingtalkQueue = [];\n      ship.init();\n      ship.ready(function(){\n        isReady = ship.isReady;\n        dingtalk.apis = ship.apis ? ship.apis : {};\n        performQueue();\n      });\n    },\n    ready: function(cb: Function){\n      if (!cb || typeof cb !== 'function'){\n        logger.warn('callback is undefined');\n        return;\n      }\n      if (isReady){\n        permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n      } else {\n        function bufferFunction(cb){\n          return function(){\n            permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n          }\n        }\n        dingtalkQueue && dingtalkQueue.push(bufferFunction(cb));\n      }\n    },\n    error: function(cb){\n      if (typeof cb === 'function'){\n        dingtalkErrorCb = cb;\n      }\n    },\n    EventEmitter: ship.EventEmitter\n  };\n  return dingtalk;\n}\n\nexport default initDingtalkSDK;\n","\n/* @flow */\n\nfunction installNativeEvent(dingtalk:Object){\n  dingtalk.on = function(type, listener, useCapture){\n    document.addEventListener(type, listener, useCapture);\n  }\n  dingtalk.off = function(type, listener, useCapture){\n    document.removeEventListener(type, listener, useCapture);\n  }\n}\n\nexport default installNativeEvent;\n","\n/* @flow */\n\n\nimport initDingtalkSDK from 'core/bridge.js';\nimport installNativeEvent from './nativeEvent.js';\n\nfunction initWebDingtalkSDK() : Object{\n  let dingtalk = initDingtalkSDK();\n  installNativeEvent(dingtalk);\n  return dingtalk;\n}\n\nexport default initWebDingtalkSDK;\n","/* @flow */\n\nimport ship from 'dingtalk-sdk-ship';\n\nfunction installNativeEvent(dingtalk:Object){\n  dingtalk.on = ship.on;\n  dingtalk.off = ship.off;\n}\n\nexport default installNativeEvent;\n","/* @flow */\n\nimport initDingtalkSDK from 'core/bridge.js';\nimport installNativeEvent from './nativeEvent.js';\n\nfunction initWeexDingtalkSDK() : Object{\n  let dingtalk = initDingtalkSDK();\n  installNativeEvent(dingtalk);\n  return dingtalk;\n}\n\nexport default initWeexDingtalkSDK;\n","/* @flow */\n\nimport env from './core/env.js';\nimport initRequire from './core/requireModule.js';\n\nexport default {\n  env: env,\n  requireModule: initRequire()\n};\n","/* @flow */\n\nconst logger:{\n  warn:Function,\n  info:Function,\n  error:Function\n} = {\n  warn: function (msg: string, e:Object){\n    console.warn('[DINGTALK JS SDK Warning]:', msg);\n    if (e) {\n      throw e;\n    } else {\n      const warning = new Error('WARNING STACK TRACE');\n      console.warn(warning.stack);\n    }\n  },\n  info: function (msg: string){\n    console.info('[DINGTALK JS SDK INFO]:', msg);\n  },\n  error: function (msg: string){\n    console.error('[DINGTALK JS SDK ERROR]:', msg);\n  }\n};\n\nexport default logger;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n// @flow\nimport weexEnvVar from 'dingtalk-sdk-polyfills';\nimport initWebDingtalkSDK from './platforms/web/index.js';\nimport initWeexDingtalkSDK from './platforms/weex/index.js';\nimport logger from 'shared/logger.js';\n\nlet initCtrl: boolean = true;\nlet platform: string = weexEnvVar.env.platform;\nlet isDingtalk: boolean = weexEnvVar.env.isDingtalk;\nlet dingtalkSDK: Object = {};\n\nif (!isDingtalk){\n  logger.warn('can only open the page be Dingtalk Container');\n}\n\nif (initCtrl){\n  initCtrl = false;\n  switch (platform){\n    case 'Web':\n        dingtalkSDK = initWebDingtalkSDK();\n      break;\n    default:\n        dingtalkSDK = initWeexDingtalkSDK();\n      break\n  }\n  dingtalkSDK.init();\n}\n\nexport default dingtalkSDK;\n"],"names":["dingtalkContainer","isWeex","weexEnv","appName","UA","indexOf","initRequireModule","requireModule","name","moduleName","__weex_require__","weex","android_exec","exec","config","body","win","onSuccess","fail","onFail","context","response","__status__","status","message","__message__","STATUS_OK","call","STATUS_ERROR","ios_exec","errorCode","result","webViewJavascriptBridge","window","_WebViewJavascriptBridge","callHandler","plugin","action","args","WebViewJavascriptBridgeAndroid","runAndroid","nuva","require","web_exec","isIOS","addEventListener","isAndroid","undefined","isReady","bridgeReady","native_exec","nativeExec","platform","toArray","list","index","_index","i","length","_array","Array","createApi","_name","_action","params","onCancel","createFuns","funs","s","Object","create","forEach","parseJsApis","jsApis","apis","node","split","staging","j","h","p","x","hasOwnProperty","k","rtFunc","method","cb","initDingtalkRequire","checkConfigVars","infoKey","keys","map","v","filter","warn","permissionJsApis","jsApisConfig","errorCb","ready","permission","ship","runtime","apisConf","errCb","error","requestJsApis","performQueue","dingtalkQueue","task","initDingtalkSDK","dingtalk","process","env","NODE_ENV","init","dingtalkJsApisConfig","dingtalkErrorCb","push","EventEmitter","installNativeEvent","on","type","listener","useCapture","off","removeEventListener","initWebDingtalkSDK","initWeexDingtalkSDK","bundleFrameworkType","bundleUrl","originalUrl","appVersion","callNative","navigator","isWeb","isWeexiOS","isWeexAndroid","userAgent","toLowerCase","isDingtalk","initRequire","weexEnvVar","test","weexInstanceVar","cat","event","fun","cbs","splice","_on","apply","this","arguments","globalEvent","emit","once","handler","e","logger","msg","warning","Error","stack","info","checks","initCtrl","dingtalkSDK"],"mappings":"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"}