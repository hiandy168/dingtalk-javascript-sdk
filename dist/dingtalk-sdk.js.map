{"version":3,"file":"dingtalk-sdk.js","sources":["../package/dingtalk-sdk-polyfills/core/env.js","../package/dingtalk-sdk-polyfills/core/requireModule.js","../package/dingtalk-sdk-polyfills/index.js","../package/dingtalk-sdk-exec/android_exec.js","../package/dingtalk-sdk-exec/ios_exec.js","../package/dingtalk-sdk-exec/web_exec.js","../package/dingtalk-sdk-exec/index.js","../package/dingtalk-sdk-ship/global-api/EventEmitter.js","../package/dingtalk-sdk-ship/core/parseJsApis.js","../package/dingtalk-sdk-ship/index.js","../src/shared/logger.js","../src/shared/checkConfigVars.js","../src/core/permissionJsApis.js","../src/core/bridge.js","../src/platforms/web/nativeEvent.js","../src/platforms/web/index.js","../src/platforms/weex/nativeEvent.js","../src/platforms/weex/index.js","../src/index.js"],"sourcesContent":["/* @flow */\n\nlet weexEnv = {};\n\nif (typeof weex !== 'undefined'){\n  const config = weex.config;\n  const env = config.env;\n  weexEnv.platform = env.platform;\n  weexEnv.bundleFrameworkType = 'Vue';\n  if (weexEnv.platform !== 'Web'){\n    weexEnv.dingtalk = {\n      bundleUrl: config.bundleUrl,\n      originalUrl: config.originalUrl\n    };\n    weexEnv.appVersion = env.appVersion;\n    weexEnv.appName = env.appName;\n  }\n} else {\n  if (typeof callNative === 'function'){\n    weexEnv.platform = navigator.platform;\n    weexEnv.appName = navigator.appName;\n  } else {\n    weexEnv.platform = 'Web';\n  }\n  weexEnv.bundleFrameworkType = 'Rax';\n}\n\nconst isWeb = weexEnv.platform === 'Web';\nconst isWeexiOS = env.platform === 'iOS';\nconst isWeexAndroid = env.platform === 'android';\nconst isWeex = isWeexiOS || isWeexAndroid;\n\nlet UA;\nif(isWeb){\n  UA = window.navigator.userAgent.toLowerCase();\n}\n\nfunction dingtalkContainer(){\n  if (isWeex){\n    if (weexEnv.appName === 'DingTalk' || weexEnv.appName === 'com.alibaba.android.rimet'){\n      return true;\n    }\n    return false;\n  } else {\n    return UA && UA.indexOf('dingtalk') > -1;\n  }\n}\n\nweexEnv.isDingtalk = dingtalkContainer();\n\nexport default weexEnv;\n","/* @flow */\n\nfunction initRequireModule () : Function {\n  let requireModule = function(name){\n    let moduleName = '@weex-module/' + name;\n    return __weex_require__(moduleName);\n  }\n  if (typeof weex !== 'undefined'){\n    requireModule = weex.requireModule;\n  }\n  return requireModule;\n}\n\nexport default initRequireModule;\n","/* @flow */\n\nimport env from './core/env.js';\nimport initRequire from './core/requireModule.js';\n\nexport default {\n  env: env,\n  requireModule: initRequire()\n};\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\nconst STATUS_NO_RESULT: string = '0';\nconst STATUS_OK: string = '1';\nconst STATUS_ERROR: string = '2';\n\nexport default function android_exec(exec:Function,config:Object){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\" && response.__status__) {\n        const status = response.__status__;\n        const message = response.__message__;\n        if (STATUS_OK === status){\n            win && win.call(context, message);\n        } else if (STATUS_ERROR === status){\n            fail && fail.call(context, message);\n        }\n      } else {\n        fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nexport default function ios_exec(exec:Function,config:Object){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\") {\n        if ('0' === response.errorCode) {\n          win && win.call(context, response.result);\n        } else {\n          fail && fail.call(context, response.result);\n        }\n      }\n      else {\n          fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","/* @flow */\n\nimport weexEnvVar from 'dingtalk-sdk-polyfills';\n\nlet platform = weexEnvVar.env.platform;\nlet isAndroid = null;\nlet isIOS = null;\nlet bridgeReady = false;\n\nif (platform === 'Web'){\n  const UA = window.navigator.userAgent.toLowerCase();\n  isAndroid = UA && UA.indexOf('android') > -1;\n  isIOS = UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\nfunction ios_exec(config:Object){\n  const webViewJavascriptBridge = window._WebViewJavascriptBridge;\n  if (!webViewJavascriptBridge){\n    throw 'runtime and bridge are not ready';\n  }\n  const { body, onSuccess, onFail, context } = config;\n  webViewJavascriptBridge.callHandler('exec',body,function(response){\n    if (typeof response !== 'undefined'){\n      if ('0' === response.errorCode){\n        typeof onSuccess === 'function' && onSuccess.call(context,response.result);\n      } else {\n        typeof onFail === 'function' && onFail.call(context,response.result);\n      }\n    }\n    typeof onFail === 'function' && onFail.call('-1','');\n  });\n}\n\nfunction android_exec(config:Object){\n  let { body, onSuccess, onFail, context } = config;\n  let { plugin, action, args } = body;\n  const webViewJavascriptBridge = window.WebViewJavascriptBridgeAndroid;\n  webViewJavascriptBridge(plugin, action, args, onSuccess, onFail, context);\n}\n\nfunction runAndroid(){\n  window.WebViewJavascriptBridgeAndroid = window.nuva.require();\n}\n\nexport default function web_exec(config:Object){\n  if (isIOS){\n    if (window._WebViewJavascriptBridge){\n      ios_exec(config);\n    } else {\n      document.addEventListener('_WebViewJavascriptBridgeReady',function(){\n        ios_exec(config);\n      },false);\n    }\n  } else if (isAndroid) {\n    const win = window;\n    if (win.nuva && (win.nuva.isReady === undefined || win.nuva.isReady)){\n      if (!bridgeReady){\n        runAndroid();\n      }\n      android_exec(config);\n    } else {\n      document.addEventListener('runtimeready',function(){\n        if (!bridgeReady){\n          runAndroid();\n        }\n        android_exec(config);\n      },false);\n    }\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport android_exec from './android_exec.js';\nimport ios_exec from './ios_exec.js';\nimport weexInstanceVar from 'dingtalk-sdk-polyfills';\nimport web_exec from './web_exec.js';\n\nlet platform  = weexInstanceVar.env.platform;\nlet nativeExec: ?Function = null;\nif (platform !== 'Web'){\n  nativeExec = weexInstanceVar.requireModule('nuvajs-exec').exec;\n}\n\nfunction exec_affirm(plugin: string, action: string, args: ?Object,onSuccess: ?Function, onFail: ?Function, context: ?Object){\n  const body: {\n    plugin: string,\n    action: string,\n    args: Object\n  } = {\n    plugin: plugin,\n    action: action,\n    args: args ? args : {}\n  }\n  const config: {\n    body: Object,\n    onSuccess: ?Function,\n    onFail: ?Function,\n    context: ?Object\n  } = {\n    body: body,\n    onSuccess: onSuccess ? onSuccess : null,\n    onFail: onFail ? onFail : null,\n    context: context ? context : null\n  }\n  exec(config);\n}\n\nfunction exec(config:Object) {\n  let native_exec: Function = nativeExec ? nativeExec : function(){};\n  if (platform === 'iOS'){\n    ios_exec(native_exec,config);\n  } else if(platform === 'android') {\n    android_exec(native_exec,config);\n  } else {\n    web_exec(config);\n  }\n}\n\nexport default exec;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nlet cat: Object = {};\nlet EventEmitter:{\n  on: Function,\n  off: Function,\n  once: Function,\n  emit: Function\n} = {\n  on: function(event: string,fun: Function){\n    let cbs = cat[event];\n    cbs ? cbs.push(fun) : cat[event] = [];\n    if (!cbs) {\n      cat[event].push(fun);\n    }\n  },\n  off: function(event: string,fun: Function){\n    let cbs = cat[event];\n    if (!cbs) {\n      return false;\n    }\n    if (!event && !fun) {\n      cat = {};\n      return true;\n    }\n    if (event && !fun) {\n      cat[event] = null;\n      return true;\n    }\n    let cb;\n    let i = cbs.length;\n    while(i--){\n      cb = cbs[i];\n      if (cb === fun || cb.fun === fun) {\n        cbs.splice(i,1);\n        break;\n      }\n    }\n    return true;\n  },\n  once: function(event: string,fun: Function){\n    function _on(){\n      EventEmitter.off(event,_on);\n      fun.apply(this,arguments);\n    }\n    _on.fun = fun;\n    EventEmitter.on(event,_on);\n  },\n  emit: function(event: string){\n    let isString = typeof event === 'string';\n    if (!isString){\n      return;\n    }\n    let cbs = cat[event];\n    let args = toArray(arguments,1);\n    if (cbs) {\n      let i = 0;\n      let j = cbs.length;\n      for(;i<j;i++){\n        let cb = cbs[i];\n        cb.apply(this,args);\n      }\n    }\n  }\n};\n\nfunction toArray(list: Array<any>, index: ?number) {\n  let _index = index || 0;\n  let i = list.length - _index;\n  let _array = new Array(i);\n  while(i--){\n    _array[i] = list[i + _index]\n  }\n  return _array\n}\n\nexport default EventEmitter;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport exec from 'dingtalk-sdk-exec';\n\nfunction createApi(_name:string,_action:string){\n  return function(params){\n    if (!params) {\n      params = {};\n    }\n    let onSuccess = params.onSuccess;\n    let onFail = params.onFail;\n    delete params.onSuccess;\n    delete params.onFail;\n    delete params.onCancel;\n    const config = {\n      body: {\n        plugin: _name,\n        action: _action,\n        args: params\n      },\n      onSuccess: onSuccess,\n      onFail: onFail\n    };\n    exec(config);\n  }\n}\n\nfunction createFuns(name:string,funs:Array<any>) : Object{\n  let s = Object.create(null);\n  funs.forEach(function(action){\n    s[action] = createApi(name, action);\n  });\n  return s;\n}\n\nexport default function parseJsApis(jsApis: Object) : Object{\n  let apis: Object = Object.create(null);\n  for (let name: string in jsApis) {\n    let node: Array<string> = name.split('.');\n    let funs: Array<string> = jsApis[name];\n    let staging = null;\n    let i: number = 0;\n    let j: number = node.length;\n    while (true) {\n      if (!staging) {\n        if (1 === j) {\n          let h = false;\n          let p = apis[node[i]];\n          let s = createFuns(name, funs);\n          for (let x in p){\n            if (p.hasOwnProperty(x)){\n              h = true;\n              break;\n            }\n          }\n          if (h){\n            for (let k in s){\n              p[k] = s[k];\n            }\n          } else {\n            apis[node[i]] = createFuns(name, funs);\n          }\n          break;\n        }\n        if (apis[node[i]]){\n          staging = apis[node[i]];\n          i++;\n          continue;\n        }\n        apis[node[i]] = {};\n        staging = apis[node[i]];\n        i++;\n        continue;\n      } else {\n        if ((j - 1) === i) {\n          staging[node[i]] = createFuns(name, funs);\n          break;\n        }\n        if (staging[node[i]]) {\n          i++;\n          continue;\n        }\n        staging[node[i]] = {};\n        staging = staging[node[i]];\n      }\n      i++;\n      if (i > j) {\n        break;\n      }\n    }\n  }\n\treturn apis;\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport exec from 'dingtalk-sdk-exec';\nimport EventEmitter from './global-api/EventEmitter.js';\nimport parseJsApis from './core/parseJsApis.js';\nimport weexInstanceVar from 'dingtalk-sdk-polyfills';\n\nlet platform = weexInstanceVar.env.platform;\nlet globalEvent: Object = {};\nif (platform !== 'Web'){\n  globalEvent = weexInstanceVar.requireModule('globalEvent');\n}\n\nfunction rtFunc(method: string): Function {\n  return function(cb: Function) {\n    const config:{\n      body: Object,\n      onSuccess: Function,\n      onFail: Function,\n      context: ?Object\n    } = {\n      body: {\n        plugin: 'runtime',\n        action: method,\n        args: {}\n      },\n      onSuccess: function(response){\n        if (typeof cb === 'function'){\n          cb(response);\n        }\n      },\n      onFail: function(){\n\n      },\n      context: null\n    };\n    exec(config);\n  };\n}\n\nfunction initDingtalkRequire(cb: Function){\n    rtFunc('getModules')(cb);\n}\n\nlet ship: {\n  apis: ?Object,\n  isReady: boolean,\n  runtime: Object,\n  init: Function,\n  ready: Function,\n  on: Function,\n  off: Function,\n  EventEmitter: Object\n} = {\n  getModules: null,\n  isReady: false,\n  runtime: {\n    info: rtFunc('info'),\n    _interceptBackButton: rtFunc('interceptBackButton'),\n    _interceptNavTitle: rtFunc('interceptNavTitle'),\n    _recoverNavTitle: rtFunc('recoverNavTitle'),\n    _getModules: rtFunc('getModules')\n  },\n  init: function(){\n    initDingtalkRequire(function(response){\n      if(response){\n        ship.isReady = true;\n        ship.apis = parseJsApis(response);\n        EventEmitter.emit('__ship_ready__');\n      }\n    });\n  },\n  ready: function(cb: Function){\n    if (ship.isReady){\n      if (typeof cb === 'function'){\n        cb();\n      }\n    } else {\n      if (typeof cb === 'function'){\n        EventEmitter.once('__ship_ready__', function(){\n          cb();\n        });\n      }\n    }\n  },\n  on: function(type: string, handler: Function){\n    globalEvent.addEventListener(type,function(e){\n      const event:{\n        preventDefault: Function,\n        detail: Object\n      } = {\n        preventDefault: function () {\n          console.warn('当前环境不支持 preventDefault')\n        },\n        detail: e\n      };\n      handler.call(this,event);\n    });\n  },\n  off: globalEvent.removeEventListener,\n  EventEmitter: EventEmitter\n};\n\nexport default ship;\n","/* @flow */\n\nconst logger:{\n  warn:Function,\n  info:Function,\n  error:Function\n} = {\n  warn: function (msg: string, e:Object){\n    console.warn('[DINGTALK JS SDK Warning]:', msg);\n    if (e) {\n      throw e;\n    } else {\n      const warning = new Error('WARNING STACK TRACE');\n      console.warn(warning.stack);\n    }\n  },\n  info: function (msg: string){\n    console.info('[DINGTALK JS SDK INFO]:', msg);\n  },\n  error: function (msg: string){\n    console.error('[DINGTALK JS SDK ERROR]:', msg);\n  }\n};\n\nexport default logger;\n","/* @flow */\n\nimport logger from './logger.js';\n\nconst checks = [\n  'agentId',\n  'corpId',\n  'timeStamp',\n  'nonceStr',\n  'signature',\n  'jsApiList'\n];\n\nexport default function checkConfigVars(config:Object){\n  /*\n    corpId,\n    appId,\n    timeStamp,\n    nonceStr,\n    signature,\n    jsApiList,\n    type,\n    agentId\n   */\n  let checkInfo = [];\n  let infoKey = Object.keys(config);\n  checks.map(function(v){\n     const checkResult = infoKey.filter(function (k) { return v === k;});\n     if (checkResult.length === 0){\n         logger.warn('configure : ' + v + 'is empty');\n     }\n  });\n}\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport ship from 'dingtalk-sdk-ship';\n\nexport default function permissionJsApis(cb: Function,jsApisConfig:?Object, errorCb: ?Function){\n  if (!jsApisConfig){\n    ship.ready(function(){\n      cb(null);\n    });\n    return;\n  }\n  ship.ready(function(){\n    const permission = ship.apis.runtime.permission;\n    let apisConf = jsApisConfig ? jsApisConfig : {};\n    let errCb = errorCb ? errorCb : null;\n    apisConf.onSuccess = function(response){\n      cb(null, response);\n    };\n    apisConf.onFail = function(error){\n      if (typeof errCb === 'function'){\n        errCb(error);\n      } else {\n        cb(error, null);\n      }\n    };\n    permission.requestJsApis(apisConf);\n  });\n}\n","/* @flow */\n\nimport ship from 'dingtalk-sdk-ship';\nimport { extend } from 'shared/util.js';\nimport logger from 'shared/logger.js';\nimport checkConfigVars from 'shared/checkConfigVars.js';\nimport permissionJsApis from './permissionJsApis.js';\n\nlet dingtalkJsApisConfig: ?Object = null;\nlet dingtalkQueue: ?Array<Function> = null;\nlet dingtalkErrorCb: ?Function = null;\nlet isReady: boolean = false;\n\nfunction performQueue (){\n  if (dingtalkQueue && dingtalkQueue.length > 0){\n    dingtalkQueue.forEach(function(task){\n      task();\n    });\n    dingtalkQueue.length = 0;\n  }\n}\n\nfunction initDingtalkSDK() : Object{\n  let dingtalk: {\n    apis: Object,\n    config: Function,\n    init: Function,\n    ready: Function,\n    error: Function,\n    EventEmitter: Object\n  } = {\n    apis: {},\n    config: function(config: Object){\n      if (!config){\n        logger.warn('config is undefined,you must configure Dingtalk parameters');\n        return;\n      }\n      if (process.env.NODE_ENV !== 'production'){\n        checkConfigVars(config);\n      }\n      dingtalkJsApisConfig = config;\n    },\n    init: function(){\n      // 初始化一次\n      dingtalkQueue = [];\n      ship.init();\n      ship.ready(function(){\n        isReady = ship.isReady;\n        dingtalk.apis = ship.apis ? ship.apis : {};\n        performQueue();\n      });\n    },\n    ready: function(cb: Function){\n      if (!cb || typeof cb !== 'function'){\n        logger.warn('callback is undefined');\n        return;\n      }\n      if (isReady){\n        permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n      } else {\n        function bufferFunction(cb){\n          return function(){\n            permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n          }\n        }\n        dingtalkQueue && dingtalkQueue.push(bufferFunction(cb));\n      }\n    },\n    error: function(cb){\n      if (typeof cb === 'function'){\n        dingtalkErrorCb = cb;\n      }\n    },\n    EventEmitter: ship.EventEmitter\n  };\n  return dingtalk;\n}\n\nexport default initDingtalkSDK;\n","\n/* @flow */\n\nfunction installNativeEvent(dingtalk:Object){\n  dingtalk.on = function(type, listener, useCapture){\n    document.addEventListener(type, listener, useCapture);\n  }\n  dingtalk.off = function(type, listener, useCapture){\n    document.removeEventListener(type, listener, useCapture);\n  }\n}\n\nexport default installNativeEvent;\n","\n/* @flow */\n\n\nimport initDingtalkSDK from 'core/bridge.js';\nimport installNativeEvent from './nativeEvent.js';\n\nfunction initWebDingtalkSDK() : Object{\n  let dingtalk = initDingtalkSDK();\n  installNativeEvent(dingtalk);\n  return dingtalk;\n}\n\nexport default initWebDingtalkSDK;\n","/* @flow */\n\nimport ship from 'dingtalk-sdk-ship';\n\nfunction installNativeEvent(dingtalk:Object){\n  dingtalk.on = ship.on;\n  dingtalk.off = ship.off;\n}\n\nexport default installNativeEvent;\n","/* @flow */\n\nimport initDingtalkSDK from 'core/bridge.js';\nimport installNativeEvent from './nativeEvent.js';\n\nfunction initWeexDingtalkSDK() : Object{\n  let dingtalk = initDingtalkSDK();\n  installNativeEvent(dingtalk);\n  return dingtalk;\n}\n\nexport default initWeexDingtalkSDK;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n// @flow\nimport weexEnvVar from 'dingtalk-sdk-polyfills';\nimport initWebDingtalkSDK from './platforms/web/index.js';\nimport initWeexDingtalkSDK from './platforms/weex/index.js';\nimport logger from 'shared/logger.js';\n\nlet initCtrl: boolean = true;\nlet platform: string = weexEnvVar.env.platform;\nlet isDingtalk: boolean = weexEnvVar.env.isDingtalk;\nlet dingtalkSDK: Object = {};\n\nif (!isDingtalk){\n  logger.warn('can only open the page be Dingtalk Container');\n}\n\nif (initCtrl){\n  initCtrl = false;\n  switch (platform){\n    case 'Web':\n        dingtalkSDK = initWebDingtalkSDK();\n      break;\n    default:\n        dingtalkSDK = initWeexDingtalkSDK();\n      break\n  }\n  dingtalkSDK.init();\n}\n\nexport default dingtalkSDK;\n"],"names":["weexEnv","weex","config","env","platform","bundleFrameworkType","dingtalk","bundleUrl","originalUrl","appVersion","appName","callNative","navigator","isWeb","isWeexiOS","isWeexAndroid","isWeex","UA","window","userAgent","toLowerCase","dingtalkContainer","indexOf","isDingtalk","initRequireModule","requireModule","name","moduleName","__weex_require__","initRequire","STATUS_OK","STATUS_ERROR","android_exec","exec","body","win","onSuccess","fail","onFail","context","response","__status__","status","message","__message__","call","ios_exec","errorCode","result","weexEnvVar","isAndroid","isIOS","bridgeReady","test","webViewJavascriptBridge","_WebViewJavascriptBridge","callHandler","plugin","action","args","WebViewJavascriptBridgeAndroid","runAndroid","nuva","require","web_exec","addEventListener","isReady","undefined","weexInstanceVar","nativeExec","native_exec","cat","EventEmitter","event","fun","cbs","push","cb","i","length","splice","_on","off","apply","arguments","on","isString","toArray","j","list","index","_index","_array","Array","createApi","_name","_action","params","onCancel","createFuns","funs","s","Object","create","forEach","parseJsApis","jsApis","apis","node","split","staging","h","p","x","hasOwnProperty","k","globalEvent","rtFunc","method","initDingtalkRequire","ship","emit","once","type","handler","e","warn","removeEventListener","logger","msg","warning","Error","stack","info","error","checks","checkConfigVars","checkInfo","infoKey","keys","map","v","checkResult","filter","permissionJsApis","jsApisConfig","errorCb","ready","permission","runtime","apisConf","errCb","requestJsApis","dingtalkJsApisConfig","dingtalkQueue","dingtalkErrorCb","performQueue","task","initDingtalkSDK","process","NODE_ENV","init","bufferFunction","installNativeEvent","listener","useCapture","initWebDingtalkSDK","initWeexDingtalkSDK","initCtrl","dingtalkSDK"],"mappings":"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"}